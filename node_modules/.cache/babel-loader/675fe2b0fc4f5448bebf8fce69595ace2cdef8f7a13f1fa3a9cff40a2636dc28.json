{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gomcoder_mac/Desktop/Study/React/nwitter/nwitter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/gomcoder_mac/Desktop/Study/React/nwitter/nwitter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/gomcoder_mac/Desktop/Study/React/nwitter/nwitter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState}from\"react\";import{dbService,storageService}from\"fbase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Nweet=function Nweet(_ref){var nweetObj=_ref.nweetObj,isOwner=_ref.isOwner;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useState3=useState(nweetObj.text),_useState4=_slicedToArray(_useState3,2),newNweet=_useState4[0],setNewNweet=_useState4[1];//삭제 버튼\nvar onDeleteClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var ok;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:ok=window.confirm(\"삭제하시겠습니까?\");if(!ok){_context.next=7;break;}_context.next=4;return dbService.doc(\"nweets/\".concat(nweetObj.id)).delete();case 4:if(!(nweetObj.attachmentUrl!==\"\")){_context.next=7;break;}_context.next=7;return storageService.refFromURL(nweetObj.attachmentUrl).delete();case 7:case\"end\":return _context.stop();}},_callee);}));return function onDeleteClick(){return _ref2.apply(this,arguments);};}();var toggleEditing=function toggleEditing(){return setEditing(function(prev){return!prev;});};var onChange=function onChange(event){var value=event.target.value;setNewNweet(value);};var onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.next=3;return dbService.doc(\"nweets/\".concat(nweetObj.id)).update({text:newNweet});case 3:setEditing(false);case 4:case\"end\":return _context2.stop();}},_callee2);}));return function onSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:editing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{onChange:onChange,value:newNweet,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update Nweet\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleEditing,children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:nweetObj.text}),nweetObj.attachmentUrl&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"img\",{src:nweetObj.attachmentUrl,width:\"50px\",height:\"50px\"})}),/*#__PURE__*/_jsx(\"br\",{}),isOwner&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:onDeleteClick,children:\"Delete Nweet\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleEditing,children:\"Edit Nweet\"})]})]})});};export default Nweet;","map":{"version":3,"names":["React","useState","dbService","storageService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Nweet","_ref","nweetObj","isOwner","_useState","_useState2","_slicedToArray","editing","setEditing","_useState3","text","_useState4","newNweet","setNewNweet","onDeleteClick","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ok","wrap","_callee$","_context","prev","next","window","confirm","doc","concat","id","delete","attachmentUrl","refFromURL","stop","apply","arguments","toggleEditing","onChange","event","value","target","onSubmit","_ref3","_callee2","_callee2$","_context2","preventDefault","update","_x","children","required","type","onClick","src","width","height"],"sources":["/Users/gomcoder_mac/Desktop/Study/React/nwitter/nwitter/src/components/Nweet.js"],"sourcesContent":["import {React, useState} from \"react\";\nimport { dbService, storageService } from \"fbase\";\n\nconst Nweet = ({nweetObj, isOwner}) => {\n    const [editing, setEditing] = useState(false);\n    const [newNweet, setNewNweet] = useState(nweetObj.text);\n\n    //삭제 버튼\n    const onDeleteClick = async () => {\n        const ok = window.confirm(\"삭제하시겠습니까?\");\n\n        if(ok) {\n            await dbService.doc(`nweets/${nweetObj.id}`).delete();\n\n            if(nweetObj.attachmentUrl !== \"\") {\n                await storageService.refFromURL(nweetObj.attachmentUrl).delete();\n            }\n        }\n    };\n\n    const toggleEditing = () => setEditing((prev) => !prev);\n\n    const onChange = (event) => {\n        const {\n            target: {value},\n        } = event;\n        setNewNweet(value);\n    };\n\n    const onSubmit = async (event) => {\n        event.preventDefault();\n       await dbService.doc(`nweets/${nweetObj.id}`).update({text: newNweet});\n       setEditing(false);\n    }\n\n    return (\n        <div>\n            {editing ?(\n                <>\n                    <form onSubmit={onSubmit}>\n                        <input onChange={onChange} value={newNweet} required />\n                        <input type=\"submit\" value=\"Update Nweet\" />\n                    </form>\n                    <button onClick={toggleEditing}>Cancel</button>\n                </>\n            ):(\n                <>\n                    <h4>{nweetObj.text}</h4>\n                    {nweetObj.attachmentUrl && (\n                        <>\n                            <img src={nweetObj.attachmentUrl} width=\"50px\" height=\"50px\" />\n                        </>\n                    )}\n                    <br />\n                    {isOwner && (\n                        <>\n                            <button onClick={onDeleteClick}>Delete Nweet</button>\n                            <button onClick={toggleEditing}>Edit Nweet</button>\n                        </>\n                    )}\n                </>\n            )}    \n            \n        </div>\n    );\n};\n\nexport default Nweet;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}